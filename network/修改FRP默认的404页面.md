### 1. 介绍

本篇讲解如何修改Frp默认404 Not Found界面，默认界面为：

![file](https://cdn.memo.ak0.cn/wp-content/uploads/2022/11/1668861714-image-1668861713129.png?x-oss-process=style%2Ffull)

更改后界面为：

![file](https://cdn.memo.ak0.cn/wp-content/uploads/2022/11/1668875662-image-1668875661247.png?x-oss-process=style%2Ffull)

**我将已打包的frps文件放在文章底部，如有需要的同学可自行下载，版本是v0.45.0，后期随缘更新**

### 2. 安装依赖

```bash
# Ubuntu
sudo apt-get install bison ed gawk gcc libc6-dev make
# CentOS
sudo yum install gcc
```

### 3. 下载安装Go环境

#### 1. 手动安装

如服务器无法访问golang.org，可使用本站提供的资源，手动上传需注意执行解压命令时路径是否正确，可将文件直接放入`root`目录再执行解压命令。

```bash
# 下载当前最新版的
wget https://golang.org/dl/go1.19.3.linux-amd64.tar.gz # 2022年11月19日22:48:58
# https://pan.ak0.cn/AKE/other/go1.19.3.linux-amd64.tar.gz 本站资源链接不能使用命令直接下载，需手动下载后上传至服务器。

# 解压到/usr/local
sudo tar -C /usr/local -xzf go1.19.3.linux-amd64.tar.gz
```

#### 2. 添加环境变量

执行`vim /etc/profile`对文件进行编辑，在文件底部添加下方两行数据。

```bash
# 添加环境变量
在文件的底部添加以下两行：
export PATH=$PATH:/usr/local/go/bin
export GOPATH=/usr/local/gopath
```

完成后`{esc}`输入`:wq `保存退出，执行`source /etc/profile`重新加载profile文件，执行`go version`查看是否有输出，有输出即可。

### 4. 下载frp

先将Go模块改为国内代理，否则无法下载

```bash
go env -w GO111MODULE=on
go env -w GOPROXY=https://goproxy.cn,direct
```

通过go下载最新版frp源代码

```bash
go install github.com/fatedier/frp@latest
```


### 5. 配置
go get是默认下载到go环境的gopath目录下面.当前最新frp是v0.45.0，如果frp有版本号更新可以自行到进入到对应版本目录。

![file](https://cdn.memo.ak0.cn/wp-content/uploads/2022/11/1668873955-image-1668873953687.png?x-oss-process=style%2Ffull)

404页面在frp目录的`pkg/util/vhost/resource.go`文件里面的const节点下，根据自己需求将其修改，更改完成后输入`:wq!`强制修改保存退出。

```bash
cd /usr/local/gopath/pkg/mod/github.com/fatedier/frp@v0.45.0/pkg/util/vhost
vi resource.go
```

![file](https://cdn.memo.ak0.cn/wp-content/uploads/2022/11/1668874065-image-1668874063686.png?x-oss-process=style%2Ffull)

### 6. 重新编译

修改完成后进入Frp目录重新进行编译。

```bash
cd /usr/local/gopath/pkg/mod/github.com/fatedier/frp@v0.45.0
make
```

等待编译完毕，编译好的文件在frp下的`bin`目录内，将文件夹内frps文件上传至服务器替换原有文件即可。

```bash
cd /usr/local/gopath/pkg/mod/github.com/fatedier/frp@v0.45.0/bin
```

![file](https://cdn.memo.ak0.cn/wp-content/uploads/2022/11/1668874474-image-1668874472685.png?x-oss-process=style%2Ffull)

### 7. 下载

本站编译好的frps文件下载地址：https://pan.ak0.cn/AKE/other/Frp/frps